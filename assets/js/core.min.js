/* ************************************************************
:: Project Name: Cookie Consent Script
:: Project Author Name: Marcelo Motta
:: Project Author URI: https://marcelomotta.com
:: Project URI: https://github.com/marc310/cookie-consent
:: Version: 1.0.0 Minifyed
:: Created: 22 Set 2022
************************************************************ */

isEmptyParam=e=>null==e||""==e,CookieManage={getCookie:function(e){var t=document.cookie,o=e+"=",i=t.indexOf("; "+o);if(-1==i){if(0!=(i=t.indexOf(o)))return null}else i+=2;var n=document.cookie.indexOf(";",i);return-1==n&&(n=t.length),unescape(t.substring(i+o.length,n))},setCookie:function(e,t,o,i){var n=new Date;n.setDate(n.getDate()+o),window.document.cookie=e+"="+escape(t)+";path=/"+(isEmptyParam(o)?"":";expires="+n.toUTCString())+(isEmptyParam(i),";")},deleteCookie:function(e){CookieManage.getCookie(e)&&CookieManage.setCookie(e,"",-1,"")}},LocalStrManage={setLocalStorage:function(e,t){window.localStorage.setItem(e,t)},getLocalStorage:function(e){var t=window.localStorage.getItem(e);return null!=t?t:""},deleteLocalStorage:function(e){window.localStorage.removeItem(e)}};const timeNow=()=>(new Date).getTime(),dateNow=()=>{let e=new Date;return dataFormatada=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()},Config={name:Cookies.preferences.name?Cookies.preferences.name:"Cookie Consent",description:Cookies.preferences.description?Cookies.preferences.description:"Cookie notice bars are not enough!",url:Cookies.preferences.website?Cookies.preferences.website:"https://marcelomotta.com",privacyPage:Cookies.preferences.privacyPage?Cookies.preferences.privacyPage:"privacy.html",termsPage:Cookies.preferences.termsPage?Cookies.preferences.termsPage:"terms.html"},consent={name:Config.name,value:!0,date:dateNow(),timestamp:(new Date).getTime(),domain:Config.url,cookies:{}},arrConsentCookies=Object.keys(consent.cookies),arrayCookies=CookieManage.getCookie("Kess")?Object.entries(JSON.parse(CookieManage.getCookie("Kess")).cookies):"not consented yet",configCookies=Object.entries(Cookies.config),localCookies=JSON.parse(CookieManage.getCookie("Kess")),javascriptBlocked="javascript/blocked",appJavascript="application/javascript",setCookie="setCookie",deleteCookie="deleteCookie",comma=",",space=" ";TitleCase=e=>e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}));const blockScript=(e,t=!1)=>{let o=document.getElementById(e);if(o&&(o.setAttribute("type",javascriptBlocked),0!=t)){let t=e+"_script";document.getElementById(t).setAttribute("type",javascriptBlocked)}},unblockScript=(e,t=!1)=>{let o=document.getElementById(e);if(o&&(o.setAttribute("type",appJavascript),0!=t)){let t=e+"_script";document.getElementById(t).setAttribute("type",appJavascript)}},generateScript=(e,t=!1)=>{let o=e[0],i=e[1],n=i.wanted,c=i.script;n?(!0===c?createHeadScript(appJavascript,Cookies.config[o].src):!1===c&&createTargetScript(appJavascript,Cookies.config[o].src,o),null===c&&unblockScript(o,!0)):!1===n&&null===c&&blockScript(o,!0)},createElement=(e,t)=>{const o=document.createElement(e);return Object.entries(t).forEach((([e,t])=>{o.setAttribute(e,t)})),o};createHeadScript=(e,t)=>{let o=createElement("script",{type:e,src:t});document.head.appendChild(o)},createTargetScript=(e,t,o)=>{let i="#"+o+"_script";const n=document.querySelector(i);if(!n)return!1;{let o=createElement("script",{type:e,src:t});n.appendChild(o)}};const renderIconBack=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 448 512"),t.setAttribute("xmlns","http://www.w3.org/2000/svg");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"),t.appendChild(o),e.appendChild(t)},renderIconClose=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("width","24"),t.setAttribute("heigth","24"),t.setAttribute("fill","none"),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("stroke","#273240"),t.classList.add("post-icon");const o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("opacity","0.5"),t.appendChild(o);const i=document.createElementNS("http://www.w3.org/2000/svg","path"),n=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d","M18 6L6 18"),n.setAttribute("d","M6 6L18 18"),i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("stroke-width","1.5"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round"),n.setAttribute("stroke-width","1.5"),o.appendChild(i),o.appendChild(n),e.appendChild(t)};validateCookie=()=>{arrayCookies.length!=configCookies.length&&(console.log("Cookie out of date"),CookieManage.deleteCookie(Cookies.preferences.name))},createCookieSettingsElements=()=>{let e=createElement("div",{class:"cookie_wrapper"});document.body.after(e);let t=createElement("div",{class:"cookie"});e.appendChild(t);let o=createElement("div",{class:"close"});t.appendChild(o),renderIconClose(o),div_front=createElement("div",{class:"front"}),t.appendChild(div_front),front_h1=document.createElement("h1"),front_h1.innerHTML="Privacy Preference Center",div_front.appendChild(front_h1),front_p=document.createElement("p"),front_p.innerHTML='When you visit any website, it may store or retrieve information on your browser, mostly in the form of cookies. This information might be about you, your preferences or your device and is mostly used to make the site work as you expect it to our <a href="https://kessgame.com/privacy.html" id="privacy">Privacy Policy</a>.',div_front.appendChild(front_p),div_front_buttons=createElement("div",{class:"front__buttons"}),div_front.appendChild(div_front_buttons),button_allow_front_buttons=createElement("button",{class:"front__buttons",type:"submit",id:"allowCookies"}),button_allow_front_buttons.innerHTML="Allow All",div_front_buttons.appendChild(button_allow_front_buttons),button_decline_front_buttons=createElement("button",{class:"front__buttons",type:"submit",id:"declineCookies"}),button_decline_front_buttons.innerHTML="Decline unnecessary cookies",div_front_buttons.appendChild(button_decline_front_buttons),div_front_footer=createElement("div",{class:"front__footer"}),div_front.appendChild(div_front_footer),a_more_cookie=createElement("a",{id:"more_cookie",href:"#"}),a_more_cookie.innerHTML="Manage Consent Preferences",div_front_footer.appendChild(a_more_cookie),div_back=createElement("div",{class:"back"}),t.appendChild(div_back),div_header_cookies=createElement("div",{class:"header-cookies"}),div_back.appendChild(div_header_cookies),div_back_icons=createElement("div",{class:"back_icons"}),div_header_cookies.appendChild(div_back_icons),div_back_icon=createElement("div",{class:"back_icon"}),div_back_icons.appendChild(div_back_icon),renderIconBack(div_back_icon),div_back_title=createElement("h1",{class:""}),div_back_title.innerHTML="Manage Consent Preferences",div_header_cookies.appendChild(div_back_title);let i=createElement("form",{class:"cookie_options"});div_back.appendChild(i);let n=createElement("ul",{class:"tab"});i.prepend(n);let c=document.createElement("li");n.appendChild(c);let s=createElement("i",{class:"fas fa-plus"});c.appendChild(s);let r=document.createElement("h2");r.innerHTML="Strictly Necessary Cookies",c.appendChild(r);let a=createElement("span",{class:"baged success"});a.innerHTML="Always Active",c.appendChild(a);let l=createElement("div",{class:"data2"});n.appendChild(l);let d=document.createElement("p");d.innerHTML="These cookies allow us or our third-party analytics providers to collect information and statistics on use of our services by you and other visitors. This information helps us to improve our services and products for the benefit of you and others.",l.appendChild(d);for(let e=0;e<configCookies.length;e++){let t=configCookies[e][0],o=configCookies[e][1].description,i="giveaway"==t?"Third-Party Cookies":t+" Cookies",c=document.createElement("li");n.appendChild(c);let s=createElement("i",{class:"fas fa-plus"});c.appendChild(s);let r=document.createElement("h2");r.innerHTML=TitleCase(i),c.appendChild(r);let a=createElement("label",{class:"custom_checkbox"});c.appendChild(a);let l=createElement("input",{type:"checkbox","data-function":t,id:"chk_"+t});a.appendChild(l);let d=createElement("span",{class:"toogle"});a.appendChild(d);let p=createElement("div",{class:"data2"});n.appendChild(p);let k=document.createElement("p");k.innerHTML=o,p.appendChild(k)}let p=createElement("div",{class:"back_footer"});i.appendChild(p);let k=createElement("input",{id:"confirmCookies",type:"submit",value:"Confirm my choices"});p.appendChild(k);let u=createElement("div",{class:"cookie_floater"});e.after(u);let m=createElement("img",{alt:"Cookie Privacy Settings",src:"assets/img/cookie_1f36a.png"});u.appendChild(m);let C=document.createElement("span");C.innerHTML="Privacy Settings",u.appendChild(C);let f=createElement("div",{id:"cconsent-bar",class:"collapse",role:"region","aria-label":"Cookie consent","aria-hidden":!1,tabindex:0});u.after(f);let g=createElement("div",{class:"ccb__wrapper"});f.appendChild(g);let h=createElement("div",{class:"ccb__left"});g.appendChild(h);let b=createElement("div",{class:"cc-text"});b.innerHTML="This website uses cookies to ensure you get the best experience on our website.",h.appendChild(b);let v=createElement("div",{class:"ccb__right"});g.appendChild(v);let _=createElement("div",{class:"ccb__button"});v.appendChild(_);let y=createElement("button",{class:"ccb__edit",type:"submit"});y.innerHTML="Privacy Settings",_.appendChild(y);let w=createElement("button",{class:"consent__give",type:"submit"});w.innerHTML="Accept all cookies",_.appendChild(w)},createCookieSettingsElements();const close=document.querySelector(".close"),cookieModal=document.querySelector(".cookie"),cookieWrapper=document.querySelector(".cookie_wrapper"),front=document.querySelector(".front"),back=document.querySelector(".back"),more=document.querySelector("#more_cookie"),backicon=document.querySelector(".back_icon"),cookieFloater=document.querySelector(".cookie_floater"),allowCookies=document.querySelector("#allowCookies"),declineCookies=document.querySelector("#declineCookies"),confirmCookies=document.querySelector("#confirmCookies"),cookieSettings=document.querySelector(".ccb__edit"),consentGive=document.querySelector(".consent__give"),cookieConsentBar=document.querySelector("#cconsent-bar");close.addEventListener("click",(function(){CookieManage.getCookie(Config.name)?floaterVisible():(consentBarShow(),cookieWrapper.style.display="none")})),cookieFloater.addEventListener("click",(function(){cookiePreferences(),floaterHide()})),more.addEventListener("click",(()=>{cookieMorePreferences()})),backicon.addEventListener("click",(()=>{cookiePreferences()})),consentBarHide=()=>{cookieConsentBar.classList.add("collapse")},consentBarShow=()=>{cookieConsentBar.classList.remove("collapse")},floaterVisible=()=>{cookieWrapper.style.display="none",cookieFloater.style.display="flex"},floaterHide=()=>{cookieWrapper.style.display="flex",cookieFloater.style.display="none"},cookiePreferences=()=>{back.style.display="none",front.style.display="flex"},cookieMorePreferences=()=>{front.style.display="none",back.style.display="flex"};const tab=document.querySelector(".tab"),liEl=tab.getElementsByTagName("li");for(let e=0;e<liEl.length;e++){const t=liEl[e];t.addEventListener("click",(function(){const e=t.getElementsByTagName("i")[0],o=t.nextElementSibling;"far fa-minus"==e.className?e.classList.value="fas fa-plus":e.classList.value="far fa-minus",o.classList.toggle("active")}))}createHeadScript(appJavascript,"https://unpkg.com/yett"),getAllCookies=()=>document.cookie.split(";").reduce(((e,t)=>Object.assign(e,{[t.split("=")[0].trim()]:t.split("=")[1]})),{}),listCookies=()=>{for(var e=document.cookie.split(";"),t="",o=1;o<=e.length;o++)t+=o+" "+e[o-1]+"\n";return t},getFormPref=()=>[...document.querySelectorAll("[data-function]")].filter((e=>e.checked)).map((e=>e.getAttribute("data-function"))),getAllPref=()=>[...document.querySelectorAll("[data-function]")].filter((e=>e)).map((e=>e.getAttribute("data-function"))),checkCookieConfig=()=>{if(CookieManage.getCookie(Config.name)){floaterVisible();for(const[e,t]of arrayCookies){let t=localCookies.cookies[e].wanted;document.getElementById("chk_"+e).checked=1==t&&t}if(0==localCookies.value)for(floaterHide(),cookieWrapper.style.display="none",consentBarShow(),i=0;i<configCookies.length;i++){let e=configCookies[i][0],t=configCookies[i][1];if(1!=t.script){let o=!0===t.scriptTag;blockScript(e,o)}}else for(i=0;i<arrayCookies.length;i++)generateScript(arrayCookies[i])}else{if(consentBarShow(),configCookies)for(let e=0;e<configCookies.length;e++)generateScript(configCookies[e]);for(let e=0;e<configCookies.length;e++){document.getElementById("chk_"+configCookies[e][0]).checked=!0}}},setCookieConsent=e=>{if(0==e){CookieManage.deleteCookie(Config.name)}else{CookieManage.setCookie(Config.name,e,15)}},validateCookie(),checkCookieConfig(),prepareCookies=(e,t="setCookie",o=!1)=>{if(setAllConsent=e=>{for(i=0;i<configCookies.length;i++){let t=configCookies[i][0],o=configCookies[i][1];consent.cookies[t]={},consent.cookies[t].wanted=e,consent.cookies[t].script=o.script}},setConsentByForm=e=>{for(setAllConsent(!1),i=0;i<e.length;i++){let t=e[i];consent.cookies[t].wanted=!0}},"setCookie"===t){if(0===e.length)return setAllConsent(!1),consent.value=!1,setCookieConsent(JSON.stringify(consent)),setTimeout((()=>{window.location.reload()}),"1000"),!1;if(!0===o){for(let t=0;t<e.length;t++)setConsentByForm(e),setCookieConsent(JSON.stringify(consent));setTimeout((()=>{window.location.reload()}),"1000")}else e.length===configCookies.length&&(setAllConsent(!0),setCookieConsent(JSON.stringify(consent)),setTimeout((()=>{window.location.reload()}),"1000"))}else"deleteCookie"===t&&(setAllConsent(!1),consent.value=!1,setCookieConsent(JSON.stringify(consent)),setTimeout((()=>{window.location.reload()}),"1000"))};const allPrefs=getAllPref();cookieSettings.addEventListener("click",(()=>{cookieWrapper.style.display="flex",consentBarHide()})),confirmCookies.addEventListener("click",(()=>{const e=getFormPref();prepareCookies(e,setCookie,!0),floaterVisible()})),consentGive.addEventListener("click",(()=>{prepareCookies(allPrefs,setCookie),consentBarHide(),floaterVisible()})),allowCookies.addEventListener("click",(()=>{prepareCookies(allPrefs,setCookie),floaterVisible()})),declineCookies.addEventListener("click",(()=>{prepareCookies(allPrefs,deleteCookie),floaterVisible()}));